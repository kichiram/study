# 学習コンテンツ
## アジェンダ
1. 監視とは？
2. 監視の目的
3. 監視の種類
4. 監視の方法
5. 監視ツール
## 1. 監視とは？
機器やアプリケーションなどに異常が無いか（異常を起こす可能性があるものを含む）を定常的に確認すること。  
例えば・・・
 - 機器の故障や不調
 - アプリケーションの停止、異常終了
 - リソース不足
 
 など異常が起きた場合（起きそうな場合）に気づけるようにすること。

## 2. 監視の目的
ユーザへ安定したサービスを提供できる状態にすること。  
例えば・・・
 - webサービスなら、エラーページに遷移したりレスポンスが悪い（または返ってこない）など
 - ストレージサービスなら、データの破損や欠損やI/Oのレスポンスが悪い（または返ってこない）など
 - データ提供系なら、データが無かったり期日までに出来ていないなど

 上記のような状態は安定してサービスを提供できていない状態になります。
 
## 3. 監視の種類
監視の種類は大きく分けて下記の4つです。
 - 死活監視
   - サーバやサービスが停止していないか確認する。
     - 例えばサーバならpingや特定のポートにアクセスして応答があるか。webサービスならhttpでアクセスして応答が返ってくるかなど。 
 - リソース監視
   - サービスに必要な資源が確保されているか確認する。
     - 例えばサーバならCPU・メモリ・ディスクを使いすぎていないか。資源の増強の必要性が出てきていないかなど。
 - ログ監視
   - 問題があるログが出力されていないか確認する。
     - 例えばサーバならハードウェアやソフトウェアの異常を示すログが無いか。アプリケーションなら処理が失敗したログが無いかなど。
 - サービス監視
   - サービスが正常に稼働しているか確認する。
     - 例えばサーバなら必要なプロセスが起動しているか。アプリケーションなら起動しているかや問題が発生していないかなど。

## 4. 監視の方法
監視の一般的な方法は監視サーバ（mnode）を用意し、監視対象（snode）のサーバやアプリケーションを監視するものです。監視サーバ（mnode）を用意しないと監視対象のサーバやアプリケーションが停止した場合に問題を送信することが出来なくなります。
- mnode : モニタリングノード（monitoring node）
- snode : サービスノード（service node）

また、監視サーバ（mnode）から監視対象のサーバに対してチェックするものを active check、監視対象（snode）から監視サーバ（mnode）に状況を送信することを passive check と言います。
- active check  : 主に死活監視でこの手法を利用します。
- passive check : 主にリソース監視、ログ監視、サービス監視でこの手法を利用します。

![image](https://user-images.githubusercontent.com/91726058/207789117-d9860bf1-14c7-4746-bbd8-ae43c0a9e37c.png)

## 5. 監視ツール
OSS（オープンソースソフトウェア）限定だと下記がメジャーなものだと思います。
- [Nagios](https://www.nagios.org/)
- [Zabbix](https://www.zabbix.com/jp)
- [Prometheus](https://prometheus.io/)

また、aws や Microsoft Cloudなどのクラウドは専用の監視ツールが用意されています。

## 参考にしたサイト
- https://simple-it-life.com/2016/11/06/monit/
- https://hnavi.co.jp/knowledge/blog/system-surveillance/
- https://qeee.jp/magazine/articles/7830
- https://beyondjapan.com/blog/2016/09/oss-kanshi/
